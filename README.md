
# Ribambelle Feedback Bot (Aiogram v3)

Телеграм‑бот для сбора моментальной оценки и обратной связи от гостей ресторана.
После ответа гостя бот:
- сохраняет отзыв в SQLite,
- пересылает менеджерам сводку в отдельный чат,
- генерирует персональный промокод со сроком действия,
- даёт гостю промокод и условия использования.

## Быстрый старт

1) Установите зависимости (Python 3.10+):
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

2) Создайте файл `.env` по образцу:
```
BOT_TOKEN=123456:ABC...      # токен вашего нового бота
MANAGERS_CHAT_ID=0           # числовой ID чата менеджеров (можно личку менеджера)
PROMO_VALID_DAYS=30          # срок действия промокода в днях
DB_PATH=./bot.db             # путь к базе (оставьте по умолчанию)
```

3) Запустите бота:
```bash
python main.py
```

## Что умеет бот

- `/start` — начало диалога, запрос оценки 1–5 ⭐️
- После оценки — просит краткий комментарий (можно пропустить кнопкой "Пропустить")
- Отправляет менеджерам карточку отзыва (оценка, текст, пользователь, дата, промокод, срок действия)
- Отдаёт гостю персональный промокод и срок действия
- `/help` — краткая помощь
- `/stats` (для менеджеров) — количество отзывов за 7 дней и средняя оценка

> Примечание: бот не требует прав администратора в чате гостей. Для приёма отчётов в менеджерском чате достаточно, чтобы бот был участником чата (или просто писал в личку одному менеджеру).

## Полезно знать
- Aiogram v3
- SQLite (файл `bot.db` по умолчанию)
- Промокоды уникальны и привязаны к отзыву
- Для переноса БД — достаточно забрать файл `bot.db`

